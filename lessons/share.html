<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Working with the Google Drive share dialog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <script src="../about/flat/js/jquery-1.8.3.min.js"></script>

    <!-- Loading Bootstrap -->
    <link href="../about/flat/bootstrap/css/bootstrap.css" rel="stylesheet">

    <!-- Loading Flat UI -->
    <link href="../about/flat/css/flat-ui.css" rel="stylesheet">

    <link rel="shortcut icon" href="../favicon.ico">

    <!-- HTML5 shim, for IE6-8 support of HTML5 elements. All other JS at the end of file. -->
    <!--[if lt IE 9]>
      <script src="../about/flat/js/html5shiv.js"></script>
      <script src="../about/flat/js/respond.min.js"></script>
    <![endif]-->
    <link rel="stylesheet" href="lesson.css"/>
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
    <link rel='stylesheet' type='text/css' href='../lib/Font/css/font-awesome.min.css'>
  </head>
  
  <body>
    <!-- /.container -->
    
    <nav class="navbar navbar-default navbar-fixed-top" role="navigation">
	  <div class="container-fluid">
	    <!-- Brand and toggle get grouped for better mobile display -->
	    <div class="navbar-header">
	      <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
	        <span class="sr-only">Toggle navigation</span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	        <span class="icon-bar"></span>
	      </button>
	      <a class="navbar-brand" href="https://codeyourcloud.com">Code Your Cloud</a>
	    </div>
	
	    <!-- Collect the nav links, forms, and other content for toggling -->
	    <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
	      <ul class="nav navbar-nav">
	      	<li><a href="https://codeyourcloud.com/about">About</a></li>
	        <li><a href="https://codeyourcloud.com/lessons"><i class="fa fa-graduation-cap"></i> Lessons</a></li>
	        <div class="navbar-form navbar-left" role="search">
        		<div class="form-group">
          			<input type="text" class="form-control" placeholder="Search" id="search_input">
        		</div>
        		<button class="btn btn-default" onclick="search()"><i class="fa fa-search"></i></button>
      		</div>
      		</ul>
      	<ul class="nav navbar-nav navbar-right">
      		<li><a href="https://codeyourcloud.com/help"><i class="fa fa-life-ring"></i> Help</a></li>
      		<li><a href="https://codeyourcloud.com/about#contact"><i class="fa fa-comment-o"></i> Contact us</a></li>
      		<li id="github"><a href="https://github.com/mkaminsky11/codeyourcloud"><i class="fa fa-github-square"></i> Github</a></li>
	      </ul>
	    </div><!-- /.navbar-collapse -->
	  </div><!-- /.container-fluid -->
	</nav>
	
	
    <div id="main">
    	<div id="wrapper" style="width:100%">
    		<h1 id="h">Working with the Google Drive share dialog</h1>
    	</div>
    	<p>Google Drive files are great, but they are even better if you can share them with people. To do this, you must use the share dialog.</p>
    	<h6><b>1. Load the API</b></h6>
    	<p>Just load the file.</p>
<pre class="prettyprint">
&lt;script src="https://codeyourcloud.com/client.js"&gt;&lt;script&gt;	
</pre>
		<br/>
		<h6><b>2. Authorize the user</b></h6>
		<p>You have to make sure that the user is logged into Google. <code>CLIENT_ID</code> is unique to your Google Project, and <code>SCOPES</code> is the list of authorization scopes. You also need the id of the file you want to share.</p>
<pre class="prettyprint">
var CLIENT_ID = "something";
var SCOPES = ['https://www.googleapis.com/auth/drive.install','https://www.googleapis.com/auth/drive'];
var file_id = "0ByWSHHBN-zyoRVN6UVlkYlp2dGM";

function loadDrive(){
	gapi.auth.authorize({'client_id': CLIENT_ID, 'scope': SCOPES.join(' '), 'immediate': true},handleAuth);
}
function handleAuth(authResult){
	if (authResult) {
		//logged in
		init();
		
	} 
}
function init(){
	//to be defined
}
</pre>

		<br/>
		<h6><b>3. Load the share dialog</b></h6>
		<p>Here, you load the share API itself. <code>APP_ID</code> is unique to your app. It looks something like <code>953*********</code>. <code>load_share</code> will cause the share dialog to show itself. If you need to show it more times, simple call the function again.</p>
<pre class="prettyprint">
var APP_ID = "your app id";
function init(){
	gapi.load('drive-share', load_share);
}
var load_share = function(){
	var s = new gapi.drive.share.ShareClient(APP_ID);
	s.setItemIds(file_id);
	s.showSettingsDialog();
};
</pre>

		<br/>
		<h6><b>4. Cleaning it up</b></h6>
		<p>Sometimes, we've noticed, the transparent <code>div</code>s created mess with Google Drive's picker API. To fix this, we used <code>purge</code>.</p>
		
		<br/>
		<h5><b>Final Javascript</b></h5>
<pre class="prettyprint">
var APP_ID = "your app id";
var CLIENT_ID = "something";
var SCOPES = ['https://www.googleapis.com/auth/drive.install','https://www.googleapis.com/auth/drive'];
var file_id = "0ByWSHHBN-zyoRVN6UVlkYlp2dGM";

function loadDrive(){
	gapi.auth.authorize({'client_id': CLIENT_ID, 'scope': SCOPES.join(' '), 'immediate': true},handleAuth);
}
function handleAuth(authResult){
	if (authResult) {
		//logged in
		init();
		
	} 
}
function init(){
	gapi.load('drive-share', load_share);
}
var load_share = function(){
	purge();
	var s = new gapi.drive.share.ShareClient(APP_ID);
	s.setItemIds(file_id);
	s.showSettingsDialog();
	purge();
};

function purge(){
    $(".dcs-wc-dcs-c-dcs-vc").remove();
}
</pre>
		</br>
		<h5><b>Result</b></h5>
		<div class="well">
			<img src="https://storage.googleapis.com/support-kms-prod/SNP_2678604_en_v0">
		</div>
    </div>

    <!-- Load JS here for greater good =============================-->
    <script src="../about/flat/js/jquery-ui-1.10.3.custom.min.js"></script>
    <script src="../about/flat/js/jquery.ui.touch-punch.min.js"></script>
    <script src="../about/flat/js/bootstrap.min.js"></script>
    <script src="../about/flat/js/bootstrap-select.js"></script>
    <script src="../about/flat/js/bootstrap-switch.js"></script>
    <script src="../about/flat/js/flatui-checkbox.js"></script>
    <script src="../about/flat/js/flatui-radio.js"></script>
    <script src="../about/flat/js/jquery.tagsinput.js"></script>
    <script src="../about/flat/js/jquery.placeholder.js"></script>
    
    <script src="https://codeyourcloud.com/lib/big-text/big-text.js"></script>
    
    <script src="lesson.js"></script>
    <link rel="stylesheet" href="lesson.css"/>
    
    <script>
    	function search(){
    		var query = $("#search_input").val().split("/").join("").split(" ").join("_");
	    	window.location.href = "https://codeyourcloud.com/lessons?search=" + query;
    	}
    	$("h1").bigtext();
    </script>
  </body>
</html>